{"version":3,"sources":["Store.js","HomePage.jsx","FavPage.jsx","index.js","App.jsx"],"names":["Store","React","createContext","initialState","episodes","favorites","reducer","state","action","type","payload","EpisodesList","lazy","ReactDOM","render","props","useReducer","value","dispatch","Provider","children","useContext","Fragment","className","to","length","path","toggleFavAction","episode","episodeInFavorites","includes","dispatchObj","filter","fav","id","useEffect","a","async","fetch","data","json","dataJSON","_embedded","fetchDataAction","Suspense","fallback","document","getElementById"],"mappings":"gPAEaA,EAAQC,IAAMC,gBAErBC,EAAe,CACnBC,SAAU,GACVC,UAAW,IAGb,SAASC,EAAQC,EAAOC,GACtB,OAAQA,EAAOC,MACb,IAAK,aACH,OAAO,eAAKF,EAAZ,CAAmBH,SAAUI,EAAOE,UACtC,IAAK,UACH,OAAO,eACFH,EADL,CAEEF,UAAU,GAAD,mBAAME,EAAMF,WAAZ,CAAuBG,EAAOE,YAE3C,IAAK,aACH,OAAO,eACFH,EADL,CAEEF,UAAWG,EAAOE,UAEtB,QACE,OAAOH,G,oBCrBPI,EAAeV,IAAMW,MAAK,kBAAM,gCCDjBX,IAAMW,MAAK,kBAAM,gC,MCWtCC,IAASC,OACP,mBHcK,SAAuBC,GAAQ,IAAD,EACPd,IAAMe,WAAWV,EAASH,GADnB,mBAE3Bc,EAAQ,CAAEV,MAFiB,KAEVW,SAFU,MAGnC,OACE,kBAAClB,EAAMmB,SAAP,CAAgBF,MAAOA,GAAQF,EAAMK,YGlBvC,KACE,kBAAC,IAAD,KACE,mBCRS,SAAaL,GAAQ,IAC1BR,EAAUN,IAAMoB,WAAWrB,GAA3BO,MAER,OACE,kBAAC,IAAMe,SAAP,KACE,4BAAQC,UAAU,UAChB,6BACE,mDACA,2DAEF,6BACE,kBAAC,IAAD,CAAMC,GAAG,KAAT,YACA,kBAAC,IAAD,CAAMA,GAAG,SAAT,gBAA+BjB,EAAMF,UAAUoB,UAGlDV,EAAMK,YDPP,CAAKM,KAAK,KACR,mBFZO,WAAqB,IAAD,EACLzB,IAAMoB,WAAWrB,GAArCO,EADyB,EACzBA,MAAOW,EADkB,EAClBA,SA+BTH,EAAQ,CACZX,SAAUG,EAAMH,SAChBuB,gBA/BsB,SAAAC,GACtB,IAAMC,EAAqBtB,EAAMF,UAAUyB,SAASF,GAChDG,EAAc,CAChBtB,KAAM,UACNC,QAASkB,GAEPC,IAIFE,EAAc,CACZtB,KAAM,aACNC,QAL8BH,EAAMF,UAAU2B,QAC9C,SAAAC,GAAG,OAAIA,EAAIC,KAAON,EAAQM,QAO9B,OAAOhB,EAASa,IAiBhB1B,UAAWE,EAAMF,WAOnB,OAJAJ,IAAMkC,WAAU,WACY,IAA1B5B,EAAMH,SAASqB,QAlBO,qBAAAW,EAAAC,OAAA,kEAAAD,EAAA,MACHE,MACjB,mFAFoB,cAChBC,EADgB,kBAAAH,EAAA,MAICG,EAAKC,QAJN,cAIhBC,EAJgB,yBAKfvB,EAAS,CACdT,KAAM,aACNC,QAAS+B,EAASC,UAAUtC,YAPR,qCAkBSuC,MAI/B,kBAAC,IAAMrB,SAAP,KACE,kBAAC,IAAMsB,SAAP,CAAgBC,SAAU,4CACxB,6BAAStB,UAAU,kBACjB,kBAACZ,EAAiBI,QElCpB,CAAUW,KAAK,SAIrBoB,SAASC,eAAe,W","file":"static/js/main.083bccec.chunk.js","sourcesContent":["import React from 'react';\n\nexport const Store = React.createContext();\n\nconst initialState = {\n  episodes: [],\n  favorites: []\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_DATA':\n      return { ...state, episodes: action.payload };\n    case 'ADD_FAV':\n      return {\n        ...state,\n        favorites: [...state.favorites, action.payload]\n      };\n    case 'REMOVE_FAV':\n      return {\n        ...state,\n        favorites: action.payload\n      };\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n    const [state, dispatch] = React.useReducer(reducer, initialState);\n    const value = { state, dispatch };\n  return (\n    <Store.Provider value={value}>{props.children}</Store.Provider>\n  );\n}","import React from 'react';\nimport { Store } from './Store';\n\nconst EpisodesList = React.lazy(() => import('./EpisodesList'));\n\nexport default function HomePage() {\n  const { state, dispatch } = React.useContext(Store);\n\n  const toggleFavAction = episode => {\n    const episodeInFavorites = state.favorites.includes(episode);\n    let dispatchObj = {\n      type: 'ADD_FAV',\n      payload: episode\n    };\n    if (episodeInFavorites) {\n      const favoritesWithoutEpisode = state.favorites.filter(\n        fav => fav.id !== episode.id\n      );\n      dispatchObj = {\n        type: 'REMOVE_FAV',\n        payload: favoritesWithoutEpisode\n      };\n    }\n    return dispatch(dispatchObj);\n  };\n\n  const fetchDataAction = async () => {\n    const data = await fetch(\n      'https://api.tvmaze.com/singlesearch/shows?q=the-big-bang-theory&embed=episodes'\n    );\n    const dataJSON = await data.json();\n    return dispatch({\n      type: 'FETCH_DATA',\n      payload: dataJSON._embedded.episodes\n    });\n  };\n\n  const props = {\n    episodes: state.episodes,\n    toggleFavAction: toggleFavAction,\n    favorites: state.favorites\n  };\n\n  React.useEffect(() => {\n    state.episodes.length === 0 && fetchDataAction();\n  });\n\n  return (\n    <React.Fragment>\n      <React.Suspense fallback={<div>Loading...</div>}>\n        <section className=\"episode-layout\">\n          <EpisodesList {...props} />\n        </section>\n      </React.Suspense>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport { Store } from './Store';\nconst EpisodesList = React.lazy(() => import('./EpisodesList'));\n\nexport default function FavPage() {\n  const { state, dispatch } = React.useContext(Store);\n\n  const toggleFavAction = episode => {\n    const episodeInFavorites = state.favorites.includes(episode);\n    let dispatchObj = {\n      type: 'ADD_FAV',\n      payload: episode\n    };\n    if (episodeInFavorites) {\n      const favoritesWithoutEpisode = state.favorites.filter(\n        fav => fav.id !== episode.id\n      );\n      dispatchObj = {\n        type: 'REMOVE_FAV',\n        payload: favoritesWithoutEpisode\n      };\n    }\n    return dispatch(dispatchObj);\n  };\n\n  const props = {\n    episodes: state.favorites,\n    toggleFavAction: toggleFavAction,\n    favorites: state.favorites\n  };\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <div className=\"episode-layout\">\n        <EpisodesList {...props} />\n      </div>\n    </React.Suspense>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from '@reach/router';\n\nimport { StoreProvider } from './Store';\n\nimport HomePage from './HomePage';\nimport FavPage from './FavPage';\nimport App from './App';\n\n\nimport './index.css';\n\nReactDOM.render(\n  <StoreProvider>\n    <Router>\n      <App path=\"/\">\n        <HomePage path=\"/\" />\n      </App>\n    </Router>\n  </StoreProvider>,\n  document.getElementById('root')\n);","import React from 'react';\nimport { Store } from './Store';\nimport { Link } from '@reach/router';\n\nimport HomePage from './HomePage';\nimport FavPage from './FavPage';\n\n\nexport default function App(props) {\n  const { state } = React.useContext(Store);\n\n  return (\n    <React.Fragment>\n      <header className=\"header\">\n        <div>\n          <h1>The Big Bang Theory</h1>\n          <p>Pick your favorite episodes</p>\n        </div>\n        <div>\n          <Link to=\"/\">Homepage</Link>\n          <Link to=\"faves\">Favorite(s): {state.favorites.length}</Link>\n        </div>\n      </header>\n      {props.children}\n    </React.Fragment>\n  );\n}\n\n"],"sourceRoot":""}